{%- capture placeholder_content -%}
  Placeholder content
{%- endcapture -%}

{%- liquid
  assign business_unit_id = '5f859355793967000176fdc6'
  assign widget_classes = 'trustpilot-widget'
  assign template_id = ''
  assign height = ''
  assign width = ''
  assign is_custom = false
  assign profile_url = 'https://www.trustpilot.com/review/thefemalecompany.com'
  assign current_rating = section.settings.trustpilot_current_rating
  assign review_count = section.settings.trustpilot_review_count

  case section.settings.widget
    when 'horizontal_condensed'
      assign is_custom = true
  endcase
-%}

{%- capture stars_icon -%}
<svg
  class="trustpilot-custom-widget__stars-icon"
  viewBox="0 0 512 96"
  version="1.1"
  xmlns="http://www.w3.org/2000/svg"
  xmlns:xlink="http://www.w3.org/1999/xlink"
>
  <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
    <g>
      <g>
          <rect id="Rectangle-path" fill="#00B67A" fill-rule="nonzero" x="0" y="0" width="96" height="96"></rect>
          <rect id="Rectangle-path" fill="#00B67A" fill-rule="nonzero" x="104" y="0" width="96" height="96"></rect>
          <rect id="Rectangle-path" fill="#00B67A" fill-rule="nonzero" x="208" y="0" width="96" height="96"></rect>
          <rect id="Rectangle-path" fill="#00B67A" fill-rule="nonzero" x="312" y="0" width="96" height="96"></rect>
          <g id="Half" transform="translate(416.000000, 0.000000)" fill-rule="nonzero">
              <rect id="Rectangle-path" fill="#DCDCE6" x="48" y="0" width="48" height="96"></rect>
              <rect id="Rectangle-path" fill="#00B67A" x="0" y="0" width="48" height="96"></rect>
          </g>
          <path d="M48,64.7 L62.6,61 L68.7,79.8 L48,64.7 Z M81.6,40.4 L55.9,40.4 L48,16.2 L40.1,40.4 L14.4,40.4 L35.2,55.4 L27.3,79.6 L48.1,64.6 L60.9,55.4 L81.6,40.4 L81.6,40.4 L81.6,40.4 L81.6,40.4 Z" id="Shape" fill="#FFFFFF" fill-rule="nonzero"></path>
          <path d="M152,64.7 L166.6,61 L172.7,79.8 L152,64.7 Z M185.6,40.4 L159.9,40.4 L152,16.2 L144.1,40.4 L118.4,40.4 L139.2,55.4 L131.3,79.6 L152.1,64.6 L164.9,55.4 L185.6,40.4 L185.6,40.4 L185.6,40.4 L185.6,40.4 Z" id="Shape" fill="#FFFFFF" fill-rule="nonzero"></path>
          <path d="M256,64.7 L270.6,61 L276.7,79.8 L256,64.7 Z M289.6,40.4 L263.9,40.4 L256,16.2 L248.1,40.4 L222.4,40.4 L243.2,55.4 L235.3,79.6 L256.1,64.6 L268.9,55.4 L289.6,40.4 L289.6,40.4 L289.6,40.4 L289.6,40.4 Z" id="Shape" fill="#FFFFFF" fill-rule="nonzero"></path>
          <path d="M360,64.7 L374.6,61 L380.7,79.8 L360,64.7 Z M393.6,40.4 L367.9,40.4 L360,16.2 L352.1,40.4 L326.4,40.4 L347.2,55.4 L339.3,79.6 L360.1,64.6 L372.9,55.4 L393.6,40.4 L393.6,40.4 L393.6,40.4 L393.6,40.4 Z" id="Shape" fill="#FFFFFF" fill-rule="nonzero"></path>
          <path d="M464,64.7 L478.6,61 L484.7,79.8 L464,64.7 Z M497.6,40.4 L471.9,40.4 L464,16.2 L456.1,40.4 L430.4,40.4 L451.2,55.4 L443.3,79.6 L464.1,64.6 L476.9,55.4 L497.6,40.4 L497.6,40.4 L497.6,40.4 L497.6,40.4 Z" id="Shape" fill="#FFFFFF" fill-rule="nonzero"></path>
      </g>
    </g>
  </g>
</svg>
{%- endcapture -%}

{%- render 'section' -%}
{%- if is_custom -%}
  {%- case section.settings.widget -%}
    {%- when 'horizontal_condensed' -%}
      <div class="trustpilot-custom-widget trustpilot-custom-widget--horizontal-condensed text--xsmall">
        {{ stars_icon }}
        <span><strong>{{ current_rating }}/5</strong> {{ 'sections.trustpilot.at' | t }} <a href="{{ profile_url }}" class="link" target="_blank" rel="nofollow">{{ 'sections.trustpilot.review_count' | t: review_count: review_count }}</a></span>
      </div>
  {%- endcase -%}
{%- else -%}
  <div
    class="{{ widget_classes }}"
    data-locale="{{ localization.language.iso_code }}-{{ localization.country.iso_code }}"
    data-template-id="{{ template_id }}"
    data-businessunit-id="{{ business_unit_id }}"
    data-style-height="{{ height }}"
    data-style-width="{{ width }}"
    data-theme="{{ section.settings.widget_color_scheme }}"
    data-tags="SelectedReview"
    data-font-family="Roboto"
    style="height: {{ height }};"
  >
    {{- placeholder_content -}}
  </div>
{%- endif -%}
{%- render 'section-end' -%}


{% stylesheet %}
  .trustpilot-widget {
    text-align: center;
  }

  .trustpilot-custom-widget--horizontal-condensed {
    text-align: center;
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 8px;
  }

  .trustpilot-custom-widget--horizontal-condensed .trustpilot-custom-widget__stars-icon {
    width: 100px;
  }
{% endstylesheet %}

{% schema %}
{
  "name": "Trustpilot",
  "tag": "section",
  "settings": [
    {
      "type": "header",
      "content": "Styling"
    },
    {
      "type": "select",
      "id": "widget",
      "label": "Widget",
      "options": [
        {
          "value": "horizontal_condensed",
          "label": "Horizontal condensed (Custom)"
        }
      ],
      "default": "horizontal_condensed"
    },
    {
      "type": "select",
      "id": "widget_color_scheme",
      "label": "Color scheme",
      "options": [
        {
          "value": "light",
          "label": "Black"
        },
        {
          "value": "dark",
          "label": "White"
        }
      ],
      "default": "light"
    },
    {
      "type": "color",
      "id": "section_background_color",
      "label": "Background color",
      "default": "rgba(0,0,0,0)"
    },
    {
      "type": "header",
      "content": "Content settings"
    },
    {
      "type": "range",
      "id": "trustpilot_current_rating",
      "min": 1,
      "max": 5,
      "step": 0.1,
      "label": "Trust pilot current rating",
      "default": 4
    },
    {
      "type": "text",
      "id": "trustpilot_review_count",
      "label": "Current review count",
      "default": "2000+",
      "info": "Add the current review count."
    },
    {
      "type": "header",
      "content": "Section spacing"
    },
    {
      "type": "range",
      "id": "section_spacing_top",
      "label": "Top spacing",
      "unit": "px",
      "min": 0,
      "max": 200,
      "step": 4,
      "default": 32
    },
    {
      "type": "range",
      "id": "section_spacing_bottom",
      "label": "Bottom spacing",
      "unit": "px",
      "min": 0,
      "max": 200,
      "step": 4,
      "default": 32
    },
    {
      "type": "checkbox",
      "id": "section_spacing_different_mobile",
      "label": "Use different height on mobile",
      "default": false
    },
    {
      "type": "range",
      "id": "section_spacing_top_mobile",
      "label": "Top spacing (mobile)",
      "unit": "px",
      "min": 0,
      "max": 200,
      "step": 4,
      "default": 0
    },
    {
      "type": "range",
      "id": "section_spacing_bottom_mobile",
      "label": "Bottom spacing (mobile)",
      "unit": "px",
      "min": 0,
      "max": 200,
      "step": 4,
      "default": 0
    }
  ],
  "presets": [
    {
      "name": "Trustpilot"
    }
  ]
}
{% endschema %}
